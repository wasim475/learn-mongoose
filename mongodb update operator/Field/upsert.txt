#Upsert
Upsert ржХрзА ржПржмржВ ржХрзЗржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ?
upsert рж╣рж▓ update ржЕржкрж╛рж░рзЗрж╢ржирзЗрж░ ржПржХржЯрж┐ ржЕржкрж╢ржи, ржпрж╛ update + insert рж╢ржмрзНржжржжрзНржмрзЯрзЗрж░ рж╕ржВржорж┐рж╢рзНрж░ржгред ржпржЦржи upsert: true рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯ, рждржЦржи ржПржЯрж┐ ржпрж╛ ржХрж░рзЗтАФ

ржпржжрж┐ ржбржХрзБржорзЗржирзНржЯржЯрж┐ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржмрж┐ржжрзНржпржорж╛ржи ржерж╛ржХрзЗ (ржорж╛ржирзЗ filter ржХржирзНржбрж┐рж╢ржи ржорж┐рж▓рзЗ ржпрж╛рзЯ), рждрж╛рж╣рж▓рзЗ рж╢рзБржзрзБ рж╕рзЗржЯрж┐рж░ ржЖржкржбрзЗржЯ ржХрж░рж╛ ржлрж┐рж▓рзНржб ржкрж░рж┐ржмрж░рзНрждржи рж╣ржмрзЗред
ржпржжрж┐ ржбржХрзБржорзЗржирзНржЯржЯрж┐ ржирж╛ ржерж╛ржХрзЗ (ржорж╛ржирзЗ filter ржХржирзНржбрж┐рж╢ржи ржорзЗрж▓рзЗ ржирж╛), рждрж╛рж╣рж▓рзЗ ржПржЯрж┐ ржирждрзБржи ржПржХржЯрж┐ ржбржХрзБржорзЗржирзНржЯ ржЗржирж╕рж╛рж░рзНржЯ ржХрж░ржмрзЗред

db.users.updateOne(
  { name: "Shiham" },  // ржЦрзЛржБржЬрж╛рж░ рж╢рж░рзНржд
  { $setOnInsert: { age: 25, city: "Sylhet" } }, // ржХрзЗржмрж▓ ржЗржирж╕рж╛рж░рзНржЯрзЗрж░ рж╕ржорзЯ рж╕рзЗржЯ рж╣ржмрзЗ
  { upsert: true }  // ржпржжрж┐ ржирж╛ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ ржирждрзБржи ржбржХрзБржорзЗржирзНржЯ ржпрзЛржЧ ржХрж░ржмрзЗ
);
ржпржжрж┐ Shiham ржирж╛ржорзЗ ржХрзЛржирзЛ ржЗржЙржЬрж╛рж░ ржерж╛ржХрзЗ:
ржХрж┐ржЫрзБржЗ ржЗржирж╕рж╛рж░рзНржЯ рж╣ржмрзЗ ржирж╛ред ржХрж╛рж░ржг $setOnInsert ржХрзЗржмрж▓ ржЗржирж╕рж╛рж░рзНржЯрзЗрж░ рж╕ржорзЯ ржХрж╛ржЬ ржХрж░рзЗред
ржпржжрж┐ Shiham ржирж╛ржорзЗ ржХрзЛржирзЛ ржЗржЙржЬрж╛рж░ ржирж╛ ржерж╛ржХрзЗ:
ржирждрзБржи ржПржХржЯрж┐ ржбржХрзБржорзЗржирзНржЯ рждрзИрж░рж┐ рж╣ржмрзЗ:

{ "name": "Shiham", "age": 25, "city": "Sylhet" }
ржЖрж░ржУ ржжрзБржЯрж┐ ржЙржжрж╛рж╣рж░ржг:
ржЙржжрж╛рж╣рж░ржг рзз: ржЗржЙржЬрж╛рж░рзЗрж░ ржкрзЯрзЗржирзНржЯ ржЖржкржбрзЗржЯ ржХрж░рж╛ ржмрж╛ ржирждрзБржи ржЗржЙржЬрж╛рж░ ржпрзЛржЧ ржХрж░рж╛

db.users.updateOne(
  { email: "wasim@example.com" },
  { $inc: { points: 10 } }, 
  { upsert: true }
);
тЬЕ ржпржжрж┐ ржЗржЙржЬрж╛рж░ ржерж╛ржХрзЗ: points ржлрж┐рж▓рзНржбрзЗ рззрзж ржпрзЛржЧ рж╣ржмрзЗред
тЬЕ ржпржжрж┐ ржЗржЙржЬрж╛рж░ ржирж╛ ржерж╛ржХрзЗ: ржирждрзБржи ржбржХрзБржорзЗржирзНржЯ рждрзИрж░рж┐ рж╣ржмрзЗ { email: "wasim@example.com", points: 10 }ред

ржЙржжрж╛рж╣рж░ржг рзи: ржпржжрж┐ ржЗржЙржЬрж╛рж░ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ рж╢рзБржзрзБ ржмрзЯрж╕ ржЖржкржбрзЗржЯ ржХрж░ржмрзЗ; ржирж╛ ржерж╛ржХрж▓рзЗ ржирждрзБржи ржЗржЙржЬрж╛рж░ ржмрж╛ржирж╛ржмрзЗ

db.users.updateOne(
  { username: "criccast" },
  { $set: { age: 28 } },
  { upsert: true }
);
тЬЕ ржпржжрж┐ criccast ржЗржЙржЬрж╛рж░ ржерж╛ржХрзЗ: age ржЖржкржбрзЗржЯ рж╣ржмрзЗред
тЬЕ ржпржжрж┐ ржирж╛ ржерж╛ржХрзЗ: { "username": "criccast", "age": 28 } ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржпрзБржХрзНржд рж╣ржмрзЗред

ржЙржкрж╕ржВрж╣рж╛рж░:
ржпржЦржи ржХрзЛржирзЛ ржбржХрзБржорзЗржирзНржЯ ржЖржкржбрзЗржЯ ржХрж░рждрзЗ рж╣рзЯ, ржХрж┐ржирзНрждрзБ ржирж┐рж╢рзНржЪрж┐ржд ржиржЗ ржпрзЗ рж╕рзЗржЯрж┐ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржЖржЧрзЗ ржерзЗржХрзЗржЗ ржЖржЫрзЗ ржХрж┐ржирж╛, рждржЦржи upsert: true ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред ржПрждрзЗ ржПржХрж╕ржЩрзНржЧрзЗ ржжрзБржЯрж┐ ржХрж╛ржЬ рж╣рзЯрзЗ ржпрж╛рзЯтАФ
тЬФя╕П ржерж╛ржХрж▓рзЗ ржЖржкржбрзЗржЯ рж╣ржмрзЗ
тЬФя╕П ржирж╛ ржерж╛ржХрж▓рзЗ ржирждрзБржи ржЗржирж╕рж╛рж░рзНржЯ рж╣ржмрзЗ

ржПржЯрж┐ CRUD ржЕржкрж╛рж░рзЗрж╢ржирзЗрж░ ржжржХрзНрж╖рждрж╛ ржмрж╛рзЬрж╛рзЯ ржПржмржВ ржЕрждрж┐рж░рж┐ржХрзНржд ржЪрзЗржХрж┐ржВ ржПрзЬрж╛рзЯред ЁЯЪА